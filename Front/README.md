# RIPES-like Pipeline Processor Frontend

## Quick Start

### Running the Application

```bash
cd Front
python main.py
```

### Basic Workflow

1. **Write Code** (Editor Tab - default view)
   - Enter RISC-V assembly code in the text editor
   - Click **Run** to execute the simulation

2. **View Execution** (Processor Tab)
   - Click **Processor** button to switch tabs
   - View the 5-stage pipeline visualization
   - Use controls to navigate through cycles

## Interface Layout

```
┌─────────────────────────────────────────────────────────────────────┐
│  [Editor] [Processor] [Cache]                                       │
├─────────────────────────────────────────────────────────────────────┤
│                                                                      │
│  PROCESSOR VIEW:                                                     │
│  ┌────────────────────────────────────────────────────────────────┐ │
│  │ [Reset] [◀ Back] [▶ Step] [▶▶ Run] [Stop]  Cycle: X/Y  PC: Z   │ │
│  ├────────────────────────────────────────────────────────────────┤ │
│  │                                                                 │ │
│  │  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐  ┌────────┐│ │
│  │  │Fetch │→│Decode│→│RegFile│→│Execute│→│Store │  │Register││ │
│  │  └──────┘  └──────┘  └──────┘  └──────┘  └──────┘  │  File  ││ │
│  │                                                      │ x0: 0  ││ │
│  │                                                      │ x1: 0  ││ │
│  │                                                      │  ...   ││ │
│  │                                                      └────────┘│ │
│  ├────────────────────────────────────────────────────────────────┤ │
│  │ Instruction Info: [Current cycle details]                      │ │
│  └────────────────────────────────────────────────────────────────┘ │
│                                                                      │
└─────────────────────────────────────────────────────────────────────┘
```

## Components Created

### 1. `processor_view.py`
Main processor visualization component with:
- **LogParser**: Parses `Simulador/log.txt` to extract execution data
- **PipelineStage**: Visual widget for each pipeline stage
- **ProcessorView**: Main container with all controls and displays

### 2. Updated `mainMenu.py`
- Integrated ProcessorView component
- Added log loading on simulation run
- Tab switching between Editor and Processor views

## Features

### Pipeline Visualization
- 5 stages: Fetch → Decode → RegFile → Execute → Store
- Color-coded active/idle states
- Instruction display in each stage
- Remaining cycles indicator

### Controls
- **Reset**: Return to cycle 0
- **Step Back**: Previous cycle
- **Step**: Next cycle
- **Run**: Auto-play all cycles
- **Stop**: Pause auto-play
- **Speed Slider**: Adjust animation speed (100-2000ms)

### Information Displays
- **Cycle Counter**: Current/Total
- **Program Counter (PC)**: Current address
- **Register File**: All 32 RISC-V registers (x0-x31)
- **Instruction Info**: Completion status and updates

## File Dependencies

```
Front/
├── main.py                  # Entry point
├── mainMenu.py              # Main window (updated)
├── processor_view.py        # New: Processor visualization
└── README.md                # This file

Simulador/
└── log.txt                  # Generated by backend (required)
```

## Data Flow

```
User Code (Editor)
    ↓
[Run Button] → Backend Simulation (CPUpipelineNoHazard)
    ↓
Simulador/log.txt (Generated)
    ↓
[Processor Tab] → LogParser.parse()
    ↓
ProcessorView (Displays pipeline execution)
```

## Log File Format

The processor view expects `Simulador/log.txt` with format:
```
[CICLO X] [PC= Y] Estado del Pipeline:
  Fetch:        Procesando: instruction (N ciclos restantes)
  Decode:       Libre
  ...
[CICLO X] [COMPLETADA] instruction
[STORE] Registro xN <- value
```

## Color Scheme

- **Background**: `#1A1A1A` (Dark gray)
- **UI Elements**: `#2A2A2A` (Medium gray)
- **Idle Stages**: `#3A3A3A` (Gray)
- **Active Stages**: `#4A6A4A` (Green tint)
- **Highlights**: `#6ADA6A` (Bright green)
- **Text**: White/Gray depending on state

## Development Notes

### Adding New Features
1. Modify `processor_view.py` for visual changes
2. Update `LogParser` to extract additional data
3. Add controls to `setup_ui()` method

### Customizing Pipeline
- Edit `stage_names` list in `ProcessorView.setup_ui()`
- Adjust `PipelineStage` dimensions (width/height)
- Modify colors in class constructors

## Troubleshooting

**Import Error: ProcessorView**
```bash
# Make sure you're running from Front directory
cd Front
python main.py
```

**Log file not found**
- Run a simulation first (click Run in Editor)
- Check that `Simulador/log.txt` exists
- Verify path in `mainMenu.py` line 75

**Visual elements not updating**
- Click Reset button
- Re-run simulation from Editor
- Check console for error messages

## Requirements

- Python 3.x
- tkinter (usually included with Python)
- No additional dependencies required

## Future Improvements

- [ ] Hazard detection visualization
- [ ] Memory view integration
- [ ] Cache visualization
- [ ] Breakpoint support
- [ ] Export execution trace
- [ ] Keyboard shortcuts
- [ ] Theme customization
- [ ] Performance metrics display

---

For detailed usage instructions, see [PROCESSOR_VIEW_GUIDE.md](../PROCESSOR_VIEW_GUIDE.md) in the root directory.
